{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 211427efcf1b2a679f69","webpack:///./src/index.js"],"names":["H5VideoPlayer","source","context","control","autoPlay","autoClose","orientation","aspectRatio","isString","document","querySelector","options","container","video","mask","playButton","init","createElement","_addStyles","position","left","top","right","bottom","margin","width","minWidth","height","minHeight","backgroundColor","zIndex","overflow","innerHTML","objectFit","objectPosition","appendChild","load","contains","eventBind","play","addEventListener","_isPlaying","pause","console","log","_showPlayBtn","_remove","_hiddenPlayBtn","style","display","currentTime","paused","ended","readyState","removeChild","element","styles","name","str","constructor","String"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;IC7DqBA,a;AACnB;;;;;;;;;AASA,yBAAYC,MAAZ,QAOG;AAAA,4BANDC,OAMC;AAAA,QANDA,OAMC,gCANS,MAMT;AAAA,4BALDC,OAKC;AAAA,QALDA,OAKC,gCALS,KAKT;AAAA,6BAJDC,QAIC;AAAA,QAJDA,QAIC,iCAJU,KAIV;AAAA,8BAHDC,SAGC;AAAA,QAHDA,SAGC,kCAHW,IAGX;AAAA,gCAFDC,WAEC;AAAA,QAFDA,WAEC,oCAFa,UAEb;AAAA,gCADDC,WACC;AAAA,QADDA,WACC,oCADa,IAAI,EACjB;;AAAA;;AAED,SAAKL,OAAL,GAAeM,SAASN,OAAT,IACXO,SAASC,aAAT,CAAuBR,OAAvB,CADW,GAEXA,OAFJ;AAGA,SAAKS,OAAL,GAAe;AACbV,cAAQA,MADK;AAEbE,eAASA,OAFI;AAGbC,gBAAUA,QAHG;AAIbC,iBAAWA,SAJE;AAKbC,mBAAaA,WALA;AAMbC,mBAAaA;AANA,KAAf;;AASA,SAAKK,SAAL,GAAiB,IAAjB;AACA,SAAKC,KAAL,GAAa,IAAb;AACA,SAAKC,IAAL,GAAY,IAAZ;AACA,SAAKC,UAAL,GAAkB,IAAlB;;AAEA,SAAKC,IAAL;AACD;;0BAEDA,I,mBAAO;AACL;AACA,SAAKJ,SAAL,GAAiBH,SAASQ,aAAT,CAAuB,KAAvB,CAAjB;AACAC,eAAW,KAAKN,SAAhB,EAA2B;AACzBO,gBAAU,UADe;AAEzBC,YAAM,OAFmB;AAGzBC,WAAK,OAHoB;AAIzBC,aAAO,OAJkB;AAKzBC,cAAQ,OALiB;AAMzBC,cAAQ,MANiB;AAOzBC,aAAO,OAPkB;AAQzBC,gBAAU,MAAM,KAAKf,OAAL,CAAaJ,WAAnB,GAAiC,IARlB;AASzBoB,cAAQ,MAAM,KAAKhB,OAAL,CAAaJ,WAAnB,GAAiC,IAThB;AAUzBqB,iBAAW,OAVc;AAWzBC,uBAAiB,OAXQ;AAYzBC,cAAQ,MAZiB;AAazBC,gBAAU;AAbe,KAA3B;;AAgBA,SAAKnB,SAAL,CAAeoB,SAAf,wCAC4B,KAAKrB,OAAL,CAAaV,MADzC,iKAC2M,KAAKU,OAAL,CAAaL,WADxN;;AAKA;AACA,SAAKO,KAAL,GAAa,KAAKD,SAAL,CAAeF,aAAf,CAA6B,OAA7B,CAAb;AACAQ,eAAW,KAAKL,KAAhB,EAAuB;AACrBM,gBAAU,UADW;AAErBC,YAAM,GAFe;AAGrBC,WAAK,GAHgB;AAIrBI,aAAO,MAJc;AAKrBE,cAAQ,MALa;AAMrBG,cAAQ,IANa;AAOrBG,iBAAW,MAPU;AAQrBC,sBAAgB;AARK,KAAvB;;AAWA;AACA,SAAKpB,IAAL,GAAY,KAAKF,SAAL,CAAeF,aAAf,CAA6B,KAA7B,CAAZ;AACAQ,eAAW,KAAKJ,IAAhB,EAAsB;AACpBK,gBAAU,UADU;AAEpBC,YAAM,GAFc;AAGpBC,WAAK,GAHe;AAIpBI,aAAO,MAJa;AAKpBE,cAAQ,MALY;AAMpBG,cAAQ;AANY,KAAtB;;AASA;AACA,QAAI,KAAKnB,OAAL,CAAaR,OAAjB,EAA0B;AACxB,WAAKY,UAAL,GAAkBN,SAASQ,aAAT,CAAuB,KAAvB,CAAlB;AACAC,iBAAW,KAAKH,UAAhB,EAA4B;AAC1BI,kBAAU,UADgB;AAE1BC,cAAM,GAFoB;AAG1BC,aAAK,GAHqB;AAI1BI,eAAO,MAJmB;AAK1BE,gBAAQ,MALkB;AAM1BG,gBAAQ,KANkB;AAO1BD,yBAAiB;AAPS,OAA5B;;AAUA,WAAKd,UAAL,CAAgBiB,SAAhB;;AASA,WAAKpB,SAAL,CAAeuB,WAAf,CAA2B,KAAKpB,UAAhC;AACD;AACF,G;;0BAEDqB,I,mBAAO;AACL,QAAI,CAAC,KAAKlC,OAAL,CAAamC,QAAb,CAAsB,KAAKzB,SAA3B,CAAL,EAA4C;AAC1C,WAAKV,OAAL,CAAaiC,WAAb,CAAyB,KAAKvB,SAA9B;AACD;;AAED,SAAK0B,SAAL;;AAEA,QAAI,KAAK3B,OAAL,CAAaP,QAAjB,EAA2B;AACzB,WAAKmC,IAAL;AACD;;AAED,WAAO,IAAP;AACD,G;;0BAEDD,S,wBAAY;AAAA;;AACV,QAAI,KAAK3B,OAAL,CAAaR,OAAjB,EAA0B;AACxB,WAAKW,IAAL,CAAU0B,gBAAV,CAA2B,OAA3B,EAAoC,YAAM;AACxC,YAAI,MAAKC,UAAL,EAAJ,EAAuB;AACrB,gBAAKC,KAAL;AACD,SAFD,MAEO;AACL,gBAAKH,IAAL;AACD;AACF,OAND;;AAQA,WAAKxB,UAAL,CAAgByB,gBAAhB,CAAiC,OAAjC,EAA0C,YAAM;AAC9C,cAAKD,IAAL;AACD,OAFD;AAGD;;AAED,SAAK1B,KAAL,CAAW2B,gBAAX,CAA4B,OAA5B,EAAqC,YAAM;AACzCG,cAAQC,GAAR,CAAY,OAAZ;AACA,YAAKC,YAAL;AACA,UAAI,MAAKlC,OAAL,CAAaN,SAAjB,EAA4B;AAC1B,cAAKyC,OAAL;AACD;AACF,KAND;AAOD,G;;0BAEDP,I,mBAAO;AACL,SAAK1B,KAAL,CAAW0B,IAAX;AACA,SAAKQ,cAAL;AACD,G;;0BAEDL,K,oBAAQ;AACN,SAAK7B,KAAL,CAAW6B,KAAX;AACA,SAAKG,YAAL;AACD,G;;0BAEDA,Y,2BAAe;AACb,QAAI,KAAK9B,UAAT,EAAqB;AACnB,WAAKA,UAAL,CAAgBiC,KAAhB,CAAsBC,OAAtB,GAAgC,OAAhC;AACD;AACF,G;;0BAEDF,c,6BAAiB;AACf,QAAI,KAAKhC,UAAT,EAAqB;AACnB,WAAKA,UAAL,CAAgBiC,KAAhB,CAAsBC,OAAtB,GAAgC,MAAhC;AACD;AACF,G;;0BAEDR,U,yBAAa;AACX,WAAO,KAAK5B,KAAL,CAAWqC,WAAX,GAAyB,CAAzB,IAA8B,CAAC,KAAKrC,KAAL,CAAWsC,MAA1C,IAAoD,CAAC,KAAKtC,KAAL,CAAWuC,KAAhE,IACF,KAAKvC,KAAL,CAAWwC,UAAX,GAAwB,CAD7B;AAED,G;;0BAEDP,O,sBAAU;AACR,SAAK5C,OAAL,CAAaoD,WAAb,CAAyB,KAAK1C,SAA9B;AACD,G;;;;;AAGH;;;+DAvLqBZ,a;AAwLrB,IACEkB,aAAa,SAAbA,UAAa,CAACqC,OAAD,EAAUC,MAAV,EAAqB;AAChC,OAAK,IAAIC,IAAT,IAAiBD,MAAjB,EAAyB;AACvBD,YAAQP,KAAR,CAAcS,IAAd,IAAsBD,OAAOC,IAAP,CAAtB;AACD;AACF,CALH;AAAA,IAOIjD,WAAW,SAAXA,QAAW,CAACkD,GAAD,EAAS;AACpB,SAAQ,OAAOA,GAAP,KAAe,QAAhB,IAA6BA,IAAIC,WAAJ,KAAoBC,MAAxD;AACD,CATH,C","file":"H5VideoPlayer.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"H5VideoPlayer\"] = factory();\n\telse\n\t\troot[\"H5VideoPlayer\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 211427efcf1b2a679f69","export default class H5VideoPlayer {\r\n  /**\r\n   * @param context\r\n   * @param source\r\n   * @param control\r\n   * @param autoPlay\r\n   * @param autoClose\r\n   * @param orientation\r\n   * @param aspectRatio\r\n   */\r\n  constructor(source, {\r\n    context = 'body',\r\n    control = false,\r\n    autoPlay = false,\r\n    autoClose = true,\r\n    orientation = 'portrait',\r\n    aspectRatio = 9 / 16,\r\n  }) {\r\n\r\n    this.context = isString(context)\r\n      ? document.querySelector(context)\r\n      : context;\r\n    this.options = {\r\n      source: source,\r\n      control: control,\r\n      autoPlay: autoPlay,\r\n      autoClose: autoClose,\r\n      orientation: orientation,\r\n      aspectRatio: aspectRatio,\r\n    };\r\n\r\n    this.container = null;\r\n    this.video = null;\r\n    this.mask = null;\r\n    this.playButton = null;\r\n\r\n    this.init();\r\n  };\r\n\r\n  init() {\r\n    // container\r\n    this.container = document.createElement('div');\r\n    _addStyles(this.container, {\r\n      position: 'absolute',\r\n      left: '-100%',\r\n      top: '-100%',\r\n      right: '-100%',\r\n      bottom: '-100%',\r\n      margin: 'auto',\r\n      width: '100vw',\r\n      minWidth: 100 * this.options.aspectRatio + 'vh',\r\n      height: 100 / this.options.aspectRatio + 'vw',\r\n      minHeight: '100vh',\r\n      backgroundColor: 'black',\r\n      zIndex: '9999',\r\n      overflow: 'hidden',\r\n    });\r\n\r\n    this.container.innerHTML = `\r\n      <video width=\"100%\" src=${this.options.source} preload x-webkit-airplay=\"allow\" webkit-playsinline=\"true\" playsinline x5-video-player-type=\"h5\" x5-video-player-fullscreen=\"true\" x5-video-orientation=${this.options.orientation}></video>\r\n      <div></div>\r\n    `;\r\n\r\n    // video\r\n    this.video = this.container.querySelector('video');\r\n    _addStyles(this.video, {\r\n      position: 'absolute',\r\n      left: '0',\r\n      top: '0',\r\n      width: '100%',\r\n      height: '100%',\r\n      zIndex: '-1',\r\n      objectFit: 'fill',\r\n      objectPosition: '50% 50%',\r\n    });\r\n\r\n    // mask\r\n    this.mask = this.container.querySelector('div');\r\n    _addStyles(this.mask, {\r\n      position: 'absolute',\r\n      left: '0',\r\n      top: '0',\r\n      width: '100%',\r\n      height: '100%',\r\n      zIndex: '10',\r\n    });\r\n\r\n    // playButton\r\n    if (this.options.control) {\r\n      this.playButton = document.createElement('div');\r\n      _addStyles(this.playButton, {\r\n        position: 'absolute',\r\n        left: '0',\r\n        top: '0',\r\n        width: '100%',\r\n        height: '100%',\r\n        zIndex: '100',\r\n        backgroundColor: 'rgba(0, 0, 0, .1)',\r\n      });\r\n\r\n      this.playButton.innerHTML = `\r\n<div style=\"position: absolute; left: 0; top: 0; right: 0; bottom: 0; margin: auto; max-width: 60px; max-height: 60px; cursor: pointer; opacity: .6;\">\r\n  <svg viewBox=\"0 0 64 64\" style=\" max-width: 60px; max-height: 60px; fill: #fff;\">\r\n    <path\r\n      d=\"M26,45.5L44,32L26,18.6v27V45.5L26,45.5z M32,2C15.4,2,2,15.5,2,32c0,16.6,13.4,30,30,30c16.6,0,30-13.4,30-30 C62,15.4,48.5,2,32,2L32,2z M32,56c-9.7,0-18.5-5.9-22.2-14.8C6.1,32.2,8.1,21.9,15,15c6.9-6.9,17.2-8.9,26.2-5.2 C50.1,13.5,56,22.3,56,32C56,45.3,45.2,56,32,56L32,56z\"/>\r\n  </svg>\r\n</div>\r\n      `;\r\n\r\n      this.container.appendChild(this.playButton);\r\n    }\r\n  };\r\n\r\n  load() {\r\n    if (!this.context.contains(this.container)) {\r\n      this.context.appendChild(this.container);\r\n    }\r\n\r\n    this.eventBind();\r\n\r\n    if (this.options.autoPlay) {\r\n      this.play();\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  eventBind() {\r\n    if (this.options.control) {\r\n      this.mask.addEventListener('click', () => {\r\n        if (this._isPlaying()) {\r\n          this.pause();\r\n        } else {\r\n          this.play();\r\n        }\r\n      });\r\n\r\n      this.playButton.addEventListener('click', () => {\r\n        this.play();\r\n      });\r\n    }\r\n\r\n    this.video.addEventListener('ended', () => {\r\n      console.log('ended');\r\n      this._showPlayBtn();\r\n      if (this.options.autoClose) {\r\n        this._remove();\r\n      }\r\n    });\r\n  };\r\n\r\n  play() {\r\n    this.video.play();\r\n    this._hiddenPlayBtn();\r\n  };\r\n\r\n  pause() {\r\n    this.video.pause();\r\n    this._showPlayBtn();\r\n  };\r\n\r\n  _showPlayBtn() {\r\n    if (this.playButton) {\r\n      this.playButton.style.display = 'block';\r\n    }\r\n  };\r\n\r\n  _hiddenPlayBtn() {\r\n    if (this.playButton) {\r\n      this.playButton.style.display = 'none';\r\n    }\r\n  };\r\n\r\n  _isPlaying() {\r\n    return this.video.currentTime > 0 && !this.video.paused && !this.video.ended\r\n      && this.video.readyState > 2;\r\n  };\r\n\r\n  _remove() {\r\n    this.context.removeChild(this.container);\r\n  };\r\n}\r\n\r\n// private\r\nlet\r\n  _addStyles = (element, styles) => {\r\n    for (let name in styles) {\r\n      element.style[name] = styles[name];\r\n    }\r\n  }\r\n\r\n  , isString = (str) => {\r\n    return (typeof str === 'string') && str.constructor === String;\r\n  }\r\n;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}